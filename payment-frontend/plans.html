<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RgentAI - Plans & Pricing</title>
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        /* ... (same CSS as before for layout, colors, etc.) ... */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; color: #333; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
        .navbar { display: flex; justify-content: space-between; align-items: center; padding: 24px 40px 16px 40px; background: rgba(255,255,255,0.95); box-shadow: 0 2px 8px rgba(0,0,0,0.04); position: sticky; top: 0; z-index: 10; }
        .navbar .logo { font-size: 1.7rem; font-weight: 700; color: #667eea; letter-spacing: 1px; }
        .navbar nav a { margin-left: 32px; color: #333; text-decoration: none; font-weight: 500; transition: color 0.2s; }
        .navbar nav a:hover { color: #764ba2; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { text-align: center; color: white; margin-bottom: 50px; }
        .header h1 { font-size: 3rem; margin-bottom: 10px; font-weight: 700; }
        .header p { font-size: 1.2rem; opacity: 0.9; }
        .pricing-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-bottom: 50px; }
        .pricing-card { background: white; border-radius: 20px; padding: 40px; text-align: center; box-shadow: 0 20px 40px rgba(0,0,0,0.1); transition: transform 0.3s ease, box-shadow 0.3s ease; position: relative; overflow: hidden; display: flex; flex-direction: column; }
        .pricing-card:hover { transform: translateY(-10px); box-shadow: 0 30px 60px rgba(0,0,0,0.15); }
        .pricing-card.featured { border: 3px solid #667eea; transform: scale(1.05); }
        .pricing-card.featured::before { content: "Most Popular"; position: absolute; top: 20px; right: -30px; background: #667eea; color: white; padding: 8px 40px; transform: rotate(45deg); font-size: 0.8rem; font-weight: bold; }
        .pricing-card.best-results { border: 3px solid #764ba2; transform: scale(1.05); }
        .pricing-card.best-results::before { content: "Best Results"; position: absolute; top: 20px; right: -30px; background: #764ba2; color: white; padding: 8px 40px; transform: rotate(45deg); font-size: 0.8rem; font-weight: bold; }
        .plan-name { font-size: 1.5rem; font-weight: 600; margin-bottom: 10px; color: #333; }
        .plan-price { font-size: 2.2rem; font-weight: 700; color: #667eea; margin-bottom: 5px; }
        .plan-period { color: #666; margin-bottom: 30px; }
        .plan-features { list-style: none; margin-bottom: 30px; flex-grow: 1; }
        .plan-features li { padding: 10px 0; border-bottom: 1px solid #eee; }
        .plan-features li:last-child { border-bottom: none; }
        .btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 15px 40px; border-radius: 50px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; text-decoration: none; display: inline-block; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3); }
        .btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
        .features-section { background: white; border-radius: 20px; padding: 50px; margin-bottom: 50px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; }
        .feature { text-align: center; padding: 20px; }
        .feature-icon { font-size: 3rem; margin-bottom: 20px; color: #667eea; }
        .feature h3 { margin-bottom: 10px; color: #333; }
        .feature p { color: #666; }
        .footer { text-align: center; color: white; opacity: 0.8; margin-top: 50px; }
        .loading { display: none; text-align: center; margin: 20px 0; }
        .spinner { border: 4px solid #f3f3f3; border-top: 4px solid #667eea; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .error { color: #e74c3c; background: #fdf2f2; padding: 15px; border-radius: 10px; margin: 20px 0; display: none; }
        .success { color: #27ae60; background: #f0f9f4; padding: 15px; border-radius: 10px; margin: 20px 0; display: none; }
        @media (max-width: 768px) { .header h1 { font-size: 2rem; } .pricing-card { padding: 30px 20px; } .features-section { padding: 30px 20px; } }
    </style>

</head>
<body>
    <div class="navbar">
        <div class="logo">RgentAI</div>
        <nav>
            <a href="homepage.html">Home</a>
            <a href="plans.html">Plans & Pricing</a>
            <a href="installation.html">Installation</a>
            <a href="data-security.html">Data Security</a>
            <a href="updates.html">Dev Updates</a>
            <a href="signin.html">Account</a>
        </nav>
    </div>
    <div class="container">
        <div class="header">
            <h1>RgentAI</h1>
            <p>Plans & Pricing for RStudio AI Assistant</p>
        </div>

        <!-- Token Explanation Section -->
        <div class="features-section" style="margin-bottom: 30px;">
            <h2 style="text-align: center; margin-bottom: 20px; color: #333;">Understanding Token Pricing</h2>
            <div style="text-align: center; color: #666; line-height: 1.6; max-width: 600px; margin: 0 auto; text-align: left;">
                <p><strong>Tokens:</strong> AI models measure text in tokens (each word is typically 0.75 tokens).</p>
                                   <p><strong>Typical usage:</strong> R coding questions use approximately 1,000-3,000 tokens total.</p>
                <p style="white-space: nowrap;"><strong>Example:</strong> "Help me debug this ggplot code" + response is approximately 2,000 tokens.</p>
            </div>
        </div>

        <div class="pricing-grid">
            <div class="pricing-card">
                <h2 class="plan-name">Free Trial</h2>
                <div class="plan-price">$0</div>
                <div class="plan-period">25 requests (one-time trial)</div>
                <ul class="plan-features">
                    <li><strong>Claude 3.5 Haiku</strong> – Fastest & most cost-effective</li>
                    <li>No card or payment required</li>
                </ul>
                <button class="btn" onclick="purchasePlan('free_trial')">Get Started</button>
            </div>

            <div class="pricing-card featured">
                <h2 class="plan-name">Pro (Haiku)</h2>
                <div class="plan-price">$10</div>
                <div class="plan-period">per month + pay per token</div>
                <ul class="plan-features">
                    <li><strong>Claude 3.5 Haiku</strong> – Fastest & most cost-effective</li>
                    <li>Perfect for simple tasks & high volume</li>
                    <li>$0.0013 per 1,000 input tokens</li>
                    <li>$0.00533 per 1,000 output tokens</li>
                    <li>Approximately 1,500 prompts for $10 in tokens</li>
                </ul>
                <button class="btn" onclick="purchasePlan('pro_haiku')">Subscribe</button>
            </div>

            <div class="pricing-card best-results">
                <h2 class="plan-name">Pro (Sonnet)</h2>
                <div class="plan-price">$10</div>
                <div class="plan-period">per month + pay per token</div>
                <ul class="plan-features">
                    <li><strong>Claude 3.5 Sonnet</strong> – Advanced reasoning & coding</li>
                    <li>Perfect for complex analysis</li>
                    <li>$0.005 per 1,000 input tokens</li>
                    <li>$0.02 per 1,000 output tokens</li>
                    <li>Approximately 400 prompts for $10 in tokens</li>
                </ul>
                <button class="btn" onclick="purchasePlan('pro_sonnet')">Subscribe</button>
            </div>
        </div>

        <!-- Enterprise Section -->
        <div class="features-section" style="margin-top: 30px;">
            <div style="text-align: center;">
                <h2 style="color: #333; margin-bottom: 15px;">Enterprise</h2>
                <p style="color: #666; font-size: 1.1rem; margin-bottom: 25px;">Need RgentAI for your organization? Contact us for custom pricing and features.</p>
                <button class="btn" onclick="showContactForm()">Contact Us</button>
            </div>
        </div>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Processing your payment...</p>
        </div>

        <div class="error" id="error"></div>
        <div class="success" id="success"></div>

        <div class="footer">
            <p>&copy; 2025 RgentAI. All rights reserved.</p>
        </div>
    </div>

    <!-- Contact Modal -->
    <div id="contactModal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5);">
        <div style="background-color: white; margin: 5% auto; padding: 30px; border-radius: 15px; width: 90%; max-width: 500px; position: relative;">
            <span onclick="closeContactForm()" style="position: absolute; right: 20px; top: 15px; font-size: 28px; font-weight: bold; cursor: pointer; color: #999;">&times;</span>
            <h2 style="color: #333; margin-bottom: 20px;">Contact Us</h2>
            <form id="contactForm" action="https://formspree.io/f/movldrzo" method="POST" onsubmit="submitContactForm(event)">
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; color: #333; font-weight: 500;">Your Email:</label>
                    <input type="email" name="email" required style="width: 100%; padding: 12px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 1rem;">
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; color: #333; font-weight: 500;">Organization:</label>
                    <input type="text" name="organization" style="width: 100%; padding: 12px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 1rem;">
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; color: #333; font-weight: 500;">Number of Users:</label>
                    <input type="number" name="userCount" style="width: 100%; padding: 12px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 1rem;">
                </div>
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 5px; color: #333; font-weight: 500;">Specific Needs:</label>
                    <textarea name="specificNeeds" rows="4" style="width: 100%; padding: 12px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 1rem; resize: vertical;"></textarea>
                </div>
                <button type="submit" class="btn" style="width: 100%;">Send Message</button>
            </form>
            <div id="contactStatus" style="margin-top: 15px; padding: 10px; border-radius: 8px; display: none;"></div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        // Make purchasePlan function globally available
        window.purchasePlan = async function(planType) {
            try {
                // Show loading
                document.getElementById('loading').style.display = 'block';
                document.getElementById('error').style.display = 'none';
                
                // Create Stripe checkout session
                const response = await fetch(`${BACKEND_URL}/api/create-stripe-checkout`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        lookup_key: planType === 'pro_haiku' ? 'pro_haiku_monthly_base_v3' : 
                                   planType === 'pro_sonnet' ? 'pro_sonnet_monthly_base_v3' : 
                                   'free_trial_monthly_v3'
                    })
                });
                
                const data = await response.json();
                
                if (response.ok && data.url) {
                    // Redirect to Stripe checkout
                    window.location.href = data.url;
                } else {
                    throw new Error(data.detail || 'Failed to create checkout session');
                }
                
            } catch (error) {
                console.error('Checkout error:', error);
                document.getElementById('error').textContent = 'Failed to start checkout. Please try again.';
                document.getElementById('error').style.display = 'block';
            } finally {
                document.getElementById('loading').style.display = 'none';
            }
        };
        
        function showContactForm() {
            document.getElementById('contactModal').style.display = 'block';
        }
        
        function closeContactForm() {
            document.getElementById('contactModal').style.display = 'none';
            document.getElementById('contactStatus').style.display = 'none';
            document.getElementById('contactForm').reset();
        }
        
        async function submitContactForm(event) {
            event.preventDefault();
            
            const statusDiv = document.getElementById('contactStatus');
            statusDiv.style.display = 'block';
            statusDiv.style.backgroundColor = '#e8f5e8';
            statusDiv.style.color = '#2d5a2d';
            statusDiv.innerHTML = 'Sending message...';
            
            try {
                const formData = new FormData(event.target);
                const response = await fetch(event.target.action, {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'Accept': 'application/json'
                    }
                });
                
                if (response.ok) {
                    statusDiv.style.backgroundColor = '#d4edda';
                    statusDiv.style.color = '#155724';
                    statusDiv.innerHTML = '✅ Message sent successfully! We\'ll get back to you soon.';
                    
                    // Reset form
                    event.target.reset();
                    
                    // Close form after 3 seconds
                    setTimeout(() => {
                        closeContactForm();
                    }, 3000);
                } else {
                    throw new Error('Failed to send email');
                }
                
            } catch (error) {
                console.error('Email error:', error);
                statusDiv.style.backgroundColor = '#f8d7da';
                statusDiv.style.color = '#721c24';
                statusDiv.innerHTML = '❌ Error sending message. Please email nathanbresette04@gmail.com directly.';
            }
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('contactModal');
            if (event.target === modal) {
                closeContactForm();
            }
        }
    </script>
</body>
</html> 